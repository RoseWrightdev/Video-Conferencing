---
# Backend Secrets for Video Conferencing Platform
# IMPORTANT: These are placeholder values. Replace with actual base64-encoded secrets before deploying.
# 
# To encode secrets:
#   echo -n "your-secret-value" | base64
#
# For production, use External Secrets Operator with AWS Secrets Manager or HashiCorp Vault
# See: https://external-secrets.io/

apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: backend-secrets
  namespace: video-conferencing
  labels:
    app.kubernetes.io/name: backend
    app.kubernetes.io/component: secrets
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: global-secret-store
    kind: ClusterSecretStore
  target:
    name: backend-secrets
    creationPolicy: Owner
  data:
  - secretKey: JWT_SECRET
    remoteRef:
      key: prod/video-conferencing/backend
      property: JWT_SECRET
  - secretKey: AUTH0_CLIENT_SECRET
    remoteRef:
      key: prod/video-conferencing/backend
      property: AUTH0_CLIENT_SECRET
  - secretKey: DATABASE_URL
    remoteRef:
      key: prod/video-conferencing/backend
      property: DATABASE_URL

---
# Secret for TLS certificates (used by Gateway)
# Create this with: kubectl create secret tls video-conferencing-tls --cert=cert.pem --key=key.pem -n video-conferencing
# This is a placeholder - actual TLS secret should be created separately
apiVersion: v1
kind: Secret
metadata:
  name: rosewright-wildcard-tls
  namespace: video-conferencing
  labels:
    app.kubernetes.io/name: gateway
    app.kubernetes.io/component: tls
type: kubernetes.io/tls
data:
  # These are INVALID placeholders - replace with actual cert/key
  # Generate with: cert-manager or let's encrypt
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi4uLgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCi4uLgotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0t
